---
import Growplex from "@/shared/assets/icons/Growplex.svg";
import ThemeController from "@/shared/ui/components/ThemeController.svelte";
import FormCTA from "@/shared/ui/components/FormCTA.svelte";

const { active } = Astro.props;
---

<header
  class="w-full backdrop-blur-md bg-base-100/70 border-b border-base-300 sticky top-0 z-10"
  role="banner"
>
  <div
    class="max-w-screen-xl flex justify-between items-center px-4 py-3 mx-auto"
  >
    <a
      href="/"
      class="inline-flex text-xl font-bold relative items-center gap-2"
      aria-label="Growplex Home"
    >
      <Growplex class="size-9" />
      <span>Growplex</span>
    </a>

    <!-- Desktop -->
    <nav class="gap-6 hidden md:flex" aria-label="Primary Navigation">
      <a href="/" class={`link link-hover ${active === "Home" && "font-semibold underline underline-offset-8"}`}
        >Home</a
      >
      <a
        href="/products/forge"
        class={`link link-hover ${active === "Forge" && "font-semibold underline underline-offset-8"}`}>Forge</a
      >
      <a
        href="/products"
        class={`link link-hover ${["Products", "Pantheon", "Hestia", "Athena", "Aletheia", "Calliope", "Iynx", "Thalia"].includes(active) && "font-semibold underline underline-offset-8"}`}
        >Products</a
      >
    </nav>

    <div class="items-center gap-3 flex">
      <div class="hidden md:block">
        <ThemeController client:load />
      </div>

      <!-- Contact Us -->
      <div>
        <slot name="CTA">
          <button
            onclick="CTAMainModal.showModal()"
            class="btn btn-primary btn-sm md:btn-md rounded-xl px-4"
            aria-haspopup="dialog"
            aria-controls="CTAMainModal"
          >
            Contact Us
          </button>
        </slot>
      </div>
    </div>

    <!-- Mobile -->
    <div class="md:hidden">
      <label for="modal_burger" class="btn btn-ghost btn-circle swap swap-rotate" aria-label="Open Menu">
        <!-- hamburger icon -->
        <svg
          class="swap-off fill-current"
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          height="32"
          viewBox="0 0 512 512"
          role="img"
          aria-hidden="true"
        >
          <path
            d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"
          ></path>
        </svg>
      </label>
    </div>
  </div>
</header>

<input type="checkbox" id="modal_burger" class="modal-toggle" />
<div class="modal modal-end z-100" role="dialog" aria-modal="true" aria-labelledby="mobileNavTitle">
  <div class="relative modal-box min-w-sm">
    <label
      for="modal_burger"
      class="btn btn-sm btn-circle absolute right-4 top-2 text-lg font-bold"
      aria-label="Close Menu"
      >âœ•</label
    >
    <h3 id="mobileNavTitle" class="text-xl font-bold text-center">Navigation</h3>
    <nav class="*:text-lg space-y-2 mb-2" aria-label="Mobile Navigation">
      <a
        href="/"
        class={`block link link-hover ${active === "Home" && "font-semibold"}`}
        >Home</a
      >
      <a
        href="/products/forge"
        class={`block link link-hover ${active === "Forge" && "font-semibold"}`}
        >Forge</a
      >
      <a
        href="/products"
        class={`block link link-hover ${active === "Products" && "font-semibold"}`}
        >Products</a
      >
    </nav>

    <h4 class="text-xl font-bold text-center">Controls</h4>
    <ThemeController client:load size="size-12" />
  </div>
  <label class="modal-backdrop" for="modal_burger">Close</label>
</div>
